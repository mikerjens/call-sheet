<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Produktionsplan</title>
  <meta name="description" content="Letl√¶selig produktionsplan til web og mobil." />
  <style>
    :root{
      --bg:#0b1020; --card:#111a33; --muted:#9fb0d0; --text:#e9eeff;
      --line:#233057; --pill:#1a2750; --accent:#7aa7ff; --ok:#55d6a4;
      --warn:#ffd27a;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#f6f8ff; --card:#ffffff; --muted:#4d5c7a; --text:#0b1020; --line:#e6ebff; --pill:#eef3ff; --accent:#2a66ff; --shadow: 0 10px 24px rgba(0,0,0,.12);}
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; font-family:var(--sans);
      background: radial-gradient(1200px 600px at 10% 0%, rgba(122,167,255,.18), transparent 55%),
                  radial-gradient(900px 500px at 90% 10%, rgba(85,214,164,.12), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    a{ color:var(--accent); text-decoration:none; }
    a:hover{ text-decoration:underline; }
    .wrap{ max-width:1100px; margin:0 auto; padding:22px 16px 44px; }

    header{
      display:flex; gap:14px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap;
      margin-bottom:14px;
    }
    .title{
      display:flex; flex-direction:column; gap:6px;
    }
    .title h1{
      margin:0; font-size:26px; letter-spacing:-.02em;
    }
    .subtitle{
      color:var(--muted); font-size:14px; line-height:1.35;
    }

    .toolbar{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    }
    .btn{
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
      box-shadow:0 2px 0 rgba(0,0,0,.12);
    }
    @media (prefers-color-scheme: light){
      .btn{ background:rgba(0,0,0,.03); }
    }
    .btn:active{ transform:translateY(1px); }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 10px; border-radius:999px;
      background:var(--pill); border:1px solid var(--line);
      color:var(--muted); font-size:12px; font-weight:600;
    }
    .grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:14px;
      margin-top:14px;
    }
    @media (max-width: 900px){
      .grid{ grid-template-columns:1fr; }
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
    }
    @media (prefers-color-scheme: light){
      .card{ background:#fff; }
    }
    .card h2{
      margin:0 0 10px; font-size:16px;
      letter-spacing:-.01em;
    }
    .kv{
      display:grid;
      grid-template-columns: 160px 1fr;
      gap:8px 12px;
      align-items:start;
      font-size:14px;
    }
    @media (max-width: 540px){
      .kv{ grid-template-columns: 1fr; }
      .kv .k{ color:var(--muted); font-weight:700; }
    }
    .k{ color:var(--muted); font-weight:700; }
    .v{ color:var(--text); }
    .muted{ color:var(--muted); }

    .timeline{
      margin-top:10px;
      display:flex; flex-direction:column; gap:10px;
    }
    .titem{
      display:grid;
      grid-template-columns: 92px 1fr;
      gap:12px;
      padding:10px 10px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
    }
    @media (prefers-color-scheme: light){
      .titem{ background:rgba(0,0,0,.02); }
    }
    .time{
      font-family:var(--mono);
      font-weight:800;
      letter-spacing:-.02em;
      color:var(--text);
    }
    .desc{ color:var(--text); font-weight:600; }
    .note{ color:var(--muted); font-size:13px; margin-top:4px; }

    .list{
      display:flex; flex-direction:column; gap:10px;
    }
    .li{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      background:rgba(255,255,255,.04);
    }
    @media (prefers-color-scheme: light){
      .li{ background:rgba(0,0,0,.02); }
    }
    .li strong{ display:block; margin-bottom:6px; }
    .tag{
      display:inline-flex;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(122,167,255,.12);
      color:var(--text);
      font-size:12px;
      font-weight:800;
      margin-left:6px;
    }

    .foot{
      margin-top:12px;
      color:var(--muted);
      font-size:12px;
      line-height:1.35;
    }

    /* Print */
    @media print{
      :root{ --bg:#fff; --text:#000; --muted:#333; --card:#fff; --line:#ddd; --shadow:none; }
      body{ background:#fff; }
      .btn, .pill[data-hide-print="1"], .hide-print{ display:none !important; }
      .card{ box-shadow:none; }
      a{ color:#000; text-decoration:none; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>Produktionsplan</h1>
        <div class="subtitle">
          Letl√¶selig plan til mobil/desktop + print. <span class="muted">Opdat√©r indholdet i ‚ÄúDATA‚Äù nederst.</span>
        </div>
      </div>

      <div class="toolbar">
        <span class="pill" data-hide-print="1">‚è±Ô∏è Auto-opdatering: <span id="autoEvery">5 min</span></span>
        <button class="btn" type="button" onclick="window.print()">üñ®Ô∏è Print / PDF</button>
        <button class="btn" type="button" onclick="toggleDetails()">üîé Vis/skjul detaljer</button>
      </div>
    </header>

    <!-- DAG NAV -->
    <div class="card">
      <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;">
        <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
          <span class="pill">üìÖ <span id="dayTitle">S√∏ndag 11. jan 2025</span></span>
          <span class="pill">üìç <span id="dayLocationShort">F√∏roya F√≥lkah√°sk√∫li</span></span>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
          <label class="pill" style="cursor:pointer;">
            V√¶lg dag:
            <select id="daySelect" style="margin-left:8px; border-radius:10px; padding:6px 8px; border:1px solid var(--line); background:transparent; color:var(--text);">
            </select>
          </label>
          <button class="btn hide-print" type="button" onclick="copyShareLink()">üîó Kopi√©r link til denne dag</button>
        </div>
      </div>

      <div class="foot">
        Hvis du vil g√∏re det endnu mere ‚Äúlive‚Äù: brug din Google Doc som kilde og opdat√©r DATA manuelt n√•r planen √¶ndrer sig.
        (Google Docs ‚Äúpublish‚Äù er super til workflow, men automatisk parsing kan v√¶re ustabil pga. format/HTML.) 
      </div>
    </div>

    <div class="grid">
      <!-- LEFT -->
      <div class="card">
        <h2>Overblik</h2>

        <div class="kv" id="overviewKv">
          <!-- filled by JS -->
        </div>

        <div style="height:12px"></div>

        <h2>Dagsprogram</h2>
        <div class="timeline" id="timeline">
          <!-- filled by JS -->
        </div>
      </div>

      <!-- RIGHT -->
      <div class="card">
        <h2>Kontakt & roller</h2>
        <div class="list" id="people">
          <!-- filled by JS -->
        </div>

        <div style="height:14px"></div>

        <h2>Rekvisitter & noter</h2>
        <div class="list" id="propsNotes">
          <!-- filled by JS -->
        </div>

        <div class="foot" id="footerNote"></div>
      </div>
    </div>
  </div>

  <script>
    // ---------- UI helpers ----------
    let SHOW_DETAILS = true;

    function toggleDetails(){
      SHOW_DETAILS = !SHOW_DETAILS;
      document.documentElement.style.setProperty("--details", SHOW_DETAILS ? "block" : "none");
      render();
    }

    function copyShareLink(){
      const dayId = getSelectedDayId();
      const url = new URL(window.location.href);
      url.searchParams.set("day", dayId);
      navigator.clipboard.writeText(url.toString());
      alert("Link kopieret ‚úÖ");
    }

    function getSelectedDayId(){
      const sel = document.getElementById("daySelect");
      return sel.value;
    }

    // ---------- DATA (redig√©r her) ----------
    const DATA = {
      autoRefreshMinutes: 5,
      days: [
        {
          id: "2025-01-11",
          title: "S√∏ndag 11. jan 2025",
          locationShort: "F√∏roya F√≥lkah√°sk√∫li",
          locationFull: "F√∏roya F√≥lkah√°sk√∫li, H√°sk√∫lavegur 14",
          crew: [
            { name: "Michael Koba", role: "Producer", phone: "+298591011" },
            { name: "Thomas Koba", role: "Fotograf & filmmaker", phone: "+298213457" },
            { name: "Hans Petur Hansen", role: "Lys & foto", phone: "" }
          ],
          cast: [
            { name: "Suni Poulsen", role: "Skuespiller", phone: "+298587742" },
            { name: "Gitte Klein", role: "Skuespiller", phone: "+298730730" }
          ],
          schedule: [
            { time: "07:00", title: "Hans Petur og Thomas Koba m√∏der og afhenter filmvogn √° Hjalla", note: "" },
            { time: "08:00", title: "Klarg√∏ring af film location", note: "Thomas Koba, Michael Koba og Hans Petur Hansen" },
            { time: "08:00", title: "Gitte Klein m√∏der til make-up i Stj√∏rnuskoti√∞", note: "" },
            { time: "08:30", title: "Suni Poulsen m√∏der til make-up i Stj√∏rnuskoti√∞", note: "" },
            { time: "08:45", title: "Rundstykker og kaffe p√• s√¶ttet p√• location", note: "" },
            { time: "09:00", title: "Optagelse p√•begyndes p√• F√∏roya F√≥lkah√°sk√∫li", note: "" },
            { time: "15:00", title: "SLUT", note: "" }
          ],
          props: [
            "Suni Poulsen m√∏der i m√∏rkt jakkes√¶t",
            "Gitte Klein m√∏der i lyst t√∏j (i henhold til aftale med producer)",
            "Buet computersk√¶rm og gamerstol"
          ],
          notes: [
            "Bliver endeligt bekr√¶ftet af F√∏roya F√≥lkah√°sk√∫li (forventes 6. jan. 2026)."
          ]
        }
      ]
    };

    // ---------- Render ----------
    function buildDaySelect(){
      const sel = document.getElementById("daySelect");
      sel.innerHTML = "";
      for(const d of DATA.days){
        const opt = document.createElement("option");
        opt.value = d.id;
        opt.textContent = d.title;
        sel.appendChild(opt);
      }

      // pick day from URL if provided
      const url = new URL(window.location.href);
      const day = url.searchParams.get("day");
      if(day && DATA.days.some(x => x.id === day)){
        sel.value = day;
      }
      sel.addEventListener("change", () => {
        const u = new URL(window.location.href);
        u.searchParams.set("day", sel.value);
        history.replaceState(null, "", u.toString());
        render();
      });
    }

    function render(){
      document.getElementById("autoEvery").textContent = DATA.autoRefreshMinutes + " min";

      const dayId = getSelectedDayId();
      const d = DATA.days.find(x => x.id === dayId) || DATA.days[0];

      document.getElementById("dayTitle").textContent = d.title;
      document.getElementById("dayLocationShort").textContent = d.locationShort;

      // Overview KV
      const kv = document.getElementById("overviewKv");
      kv.innerHTML = "";

      const kvRows = [
        ["Dato", d.title],
        ["Film location", d.locationFull],
        ["Crew", d.crew.map(p => p.name).join(", ")],
        ["Skuespillere", d.cast.map(p => p.name).join(", ")],
        ["Call (f√∏rste)", d.schedule[0]?.time || "-"],
        ["Wrap (slut)", d.schedule[d.schedule.length - 1]?.time || "-"]
      ];

      for(const [k, v] of kvRows){
        const kEl = document.createElement("div");
        kEl.className = "k";
        kEl.textContent = k;

        const vEl = document.createElement("div");
        vEl.className = "v";
        vEl.textContent = v;

        kv.appendChild(kEl);
        kv.appendChild(vEl);
      }

      // Timeline
      const tl = document.getElementById("timeline");
      tl.innerHTML = "";
      for(const s of d.schedule){
        const item = document.createElement("div");
        item.className = "titem";
        item.innerHTML = `
          <div class="time">Kl. ${escapeHtml(s.time)}</div>
          <div>
            <div class="desc">${escapeHtml(s.title)}</div>
            ${SHOW_DETAILS && s.note ? `<div class="note">${escapeHtml(s.note)}</div>` : ``}
          </div>
        `;
        tl.appendChild(item);
      }

      // People
      const people = document.getElementById("people");
      people.innerHTML = "";

      people.appendChild(personBlock("CREW", d.crew, "Crew"));
      people.appendChild(personBlock("SKUESPILLERE", d.cast, "Cast"));

      // Props + Notes
      const pn = document.getElementById("propsNotes");
      pn.innerHTML = "";

      const propsCard = document.createElement("div");
      propsCard.className = "li";
      propsCard.innerHTML = `<strong>Rekvisitter <span class="tag">PROPS</span></strong>` +
        `<div class="muted">${d.props.map(x => "‚Ä¢ " + escapeHtml(x)).join("<br>")}</div>`;
      pn.appendChild(propsCard);

      const notesCard = document.createElement("div");
      notesCard.className = "li";
      notesCard.innerHTML = `<strong>Noter <span class="tag">NOTE</span></strong>` +
        `<div class="muted">${d.notes.map(x => "‚Ä¢ " + escapeHtml(x)).join("<br>")}</div>`;
      pn.appendChild(notesCard);

      // Footer note
      document.getElementById("footerNote").textContent =
        "Sidst opdateret: " + new Date().toLocaleString("da-DK") +
        " ‚Ä¢ Del linket til en specifik dag med üîó knappen.";
    }

    function personBlock(title, arr, label){
      const wrap = document.createElement("div");
      wrap.className = "li";
      wrap.innerHTML = `<strong>${escapeHtml(title)} <span class="tag">${escapeHtml(label)}</span></strong>`;

      const lines = arr.map(p => {
        const phone = p.phone ? ` ‚Ä¢ <span class="muted">${escapeHtml(p.phone)}</span>` : "";
        const role = p.role ? ` ‚Äî <span class="muted">${escapeHtml(p.role)}</span>` : "";
        return `‚Ä¢ <span style="font-weight:800">${escapeHtml(p.name)}</span>${role}${SHOW_DETAILS ? phone : ""}`;
      }).join("<br>");

      const div = document.createElement("div");
      div.innerHTML = `<div>${lines || "<span class='muted'>Ingen</span>"}</div>`;
      wrap.appendChild(div);
      return wrap;
    }

    function escapeHtml(str){
      return (str ?? "").toString()
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // Init
    buildDaySelect();
    render();

    // Optional: auto refresh render (doesn't fetch new data ‚Äì only updates "last updated" and keeps UI alive)
    setInterval(() => render(), DATA.autoRefreshMinutes * 60 * 1000);
  </script>
</body>
</html>
